


<div class="pure-g">

    <div class="pure-u-1 pure-u-md-1-2">
        <div  class="l-box">
            <hc-project-search (projectSelected)="loadProject($event)"></hc-project-search>
        </div>
    </div>
    <div *ngIf="_project != null" class="pure-u-1 pure-u-md-1-2">
        <div class="l-box"  >
            <div id="div-planning-controls" class="card">
                <div class="pure-g">
                   
                    <div  class="pure-u-1">
                        <md-input-container  id="input-date-container" >
                            <input #dateInput (blur)="updateFromDate(dateInput.value)" mdInput [mdDatepicker]="picker" placeholder="Choose a date">
                            <button mdSuffix [mdDatepickerToggle]="picker"></button>
                        </md-input-container>
                        <md-datepicker (selectedChanged)="updateFromDate($event)" touchUi="true" #picker></md-datepicker>
                    </div>

                </div>
            </div>
        </div>
    </div>
    
    <div [hidden]="_project == null" class="pure-u-1">
        <div class="l-box">
            <div class="div-container" #elem (scroll)="onScroll(elem.scrollLeft, elem.offsetWidth, inner.offsetWidth)" >
                <table #inner>
                    <thead>
                        <tr>
                            <th colspan="3">Month</th>
                            <th [ngClass]="{'month-separator': (day.getDate() == 1)}" *ngFor="let day of dayHeaders; let i = index;">
                                <div *ngIf="(day.getDate() == 1 || i == 0)">{{monthBindings[day.getMonth()+1]}}</div>
                            </th>
                        </tr>        
                        <tr>
                            <th class="th-task-name"></th>
                            <th class="th-task-name">Task</th>
                            <th class="th-user-name">In charge</th>
                            <th [ngClass]="{'th-current-day': (day.getDate() === currentDate.getDate() && day.getMonth() === currentDate.getMonth())}" *ngFor="let day of dayHeaders">
                                <div>{{day.getDate()}}</div>
                                <div>{{dayLetters[day.getDay()]}}</div>
                            </th>
                        </tr>

                        <tr hc-planning-task-row *ngFor="let task of tasks" #row [task]="task" [fromDate]="fromDate" [baseSize]="lineSize" [toDate]="toDate" (selected)="selectTask($event, task.id)" [availableUsers]="availableUsers"></tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>
    <div [hidden]="_project == null" id="div-float-bar">
        <table >
            <tr >
                <td class="td-float-button">
                    <button mdTooltip="Remove selected task(s)" [mdTooltipPosition]="'left'" id="button-delete-task" [hidden]="selectedTaskIds.length == 0"   md-mini-fab (click)="deleteSelectedTasks()" >
                        <md-icon class="icon-white">delete</md-icon>
                    </button>
                </td>
            </tr>
            <tr>
                <td class="td-float-button">
                    <button mdTooltip="Add a task." [mdTooltipPosition]="'left'" id="button-add-task" md-fab (click)="addEmptyTask()">
                        <md-icon class="icon-white" >add</md-icon>
                    </button>
                </td>
            </tr>
        </table>
        
    </div>
<div class="pure-g">